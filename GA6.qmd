---
title: "GA6.qmd"
author: "Anna Kolganova"
format: html
theme: darkly 
editor: visual
date: "2025-11-23"
---

------------------------------------------------------------------------

**Report**

First, I created a repo:

```         
git init

git add GA6.qmd

git commit -m "Committing to the main document to set up"
```

**R Basics**:

1.  Create a character vector `fav_food` with five names of your favorite food. Replace third element of the vector with a bird name and extract first and fifth element.

    ```{r}
    fav_food <- c("asparagus", "apples" , "potatoes", "tofu", "beans")

    fav_food

    fav_food[3] <- "bold eagle"

    fav_food

    fav_food[c(1, 5)]
    ```

2.  Load the `tidyverse` package. We have seen in the class that when we load the `tidyverse` package, we see many warnings. Use the code chunk option to hide the warning. Read your `metadata.tsv` file from the `garrigos-data/meta` directory and save it as object `metadata`. Write down the data structure of the `metadata`, number of variables, and rows.

    In this question, I used 'required()' as an additional command. There's really not that much of a difference between 'library()' and "required()' but 'required()' is something I often use in my R codes. It will activate the package if the package is installed, but if not, instead of an error it will show a warning but will keep running the code.

    ```{r}
    library(tidyverse)

    require(tidyverse)

    meta <- read_tsv(file = "../garrigos-data/meta/metadata.tsv")

    str(meta)

    'The variables are time and treatment and sample id. There are 22 rows.'
    ```

3.  In the `metadata` object, replace the `dpi` with `_dpi` of the `time` variable and `cathemerium` with `cath` of the `treatment` variable.

    ```{r}
    meta |> mutate( time = sub(pattern = "10dpi", replacement = "10_dpi", x = time),

    treatment = sub(pattern = "cathemerium", replacement = "catch", x = treatment) )
    ```

**Data wrangling**:

1.  List all the datasets available in the `ggplot2` package. Read the data from inbuilt- dataset `midwest`. Save it as an object `midwest_datasets` and use the `midwest_datasets` to answer all the question afterwards.

    ```{r}
    require(ggplot2)
    data(package = "ggplot2")
    midwest_datasets <- ggplot2::midwest

    'For check:'

    midwest_datasets
    ```

2.  Filter the rows with `poptotal > 30000` and `popdensity > 800`.

    ```{r}
    midwest_datasets |>

    filter(poptotal > 30000, popdensity > 800)
    ```

3.  Select first 11 variables of the dataset. Create a new column named `asian_ameri` in `midwest_datasets`object by dividing `popasian` by `popamerindian` and sort `asian_ameri` in descending order. Save this output as `new_dataset` object

    ```{r}
    require(dplyr)

    new_dataset <- midwest_datasets |>

    select(1:11) |>

    mutate(asian_ameri = popasian / popamerindian) |>

    arrange(desc(asian_ameri))

    new_dataset
    ```

4.  Compute the total mean population per state and name the mean column as `poptotal`.

    *Note*: I wasn't sure if you wanted the mean calculated for the entire midwest_dataset or for new_dataset, so I did both

    ```{r}
    mean_pop <- midwest_datasets |>

    group_by(state) |>

    summarise(poptotal = mean(poptotal))


    mean_pop <- new_dataset |>

    group_by(state) |>

    summarise(poptotal = mean(poptotal))
    ```

I committed to GitHub at the end using terminal:

```         
git add GA6.qmd

git commit -m "Committing to the main document second time"
```

**Quarto and Data Visualization**:

1.  Create the violin plot with `state` in x-axis and `area` in y-axis. Facet the plot based on the `category`.

    ```{r}
    require(ggplot2)

    ggplot(midwest_datasets, aes(x = state, y = area)) +

    geom_violin() +

    facet_wrap(~ category) +

    theme_light() +

    labs(title = "Violin plot of area by category and state")
    ```

2.  Create a violin plot again with `state` in x-axis and `poptotal` in y-axis. Add the jitter points on the plot and color just the points based on the `category`. Is this point color global or local mapping? please explain.

    ```{r}
    ggplot(midwest_datasets, aes(x = state, y = poptotal)) +

    geom_violin() +

    geom_jitter(aes(color = category), width = 0.08, alpha = 0.5) +

    facet_wrap(~ category) +

    theme_light() +

    labs(title = "Violin plot of area by category and state")
    ```

    ```         
    This point color is local mapping because we assigned color by category inside geom_jitter, not directly inside ggplot(). It means that n other function is affected other than geom_jitter().
    ```

3.  In the above plot change the theme to `theme_bw` and color the `state` manually instead of using default colors. Add the title of the plot using the **code chunk options**. Save this plot as an object `violin_plot`.

    ```{r}
    state_colors <- c(
      IL = "purple",
      IN = "green",
      MI = "orange",
      OH = "brown",
      WI = "pink"
    )

    violin_plot <- ggplot(midwest_datasets, aes(x = state, y = poptotal)) +
      geom_violin() +
      geom_jitter(aes(color = state), width = 0.08, alpha = 0.6) +
      scale_color_manual(values = state_colors) +
      facet_wrap(~ category) +
      theme_bw()

    violin_plot
    ```

4.  Meow

    ```{r}
    ggsave(
      filename = "violoin_plot.png",
      plot = violin_plot,
      width = 8,
      height = 6
    )
    ```
